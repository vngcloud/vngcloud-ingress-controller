# Test 4: test update https cert in secret

The user can pass the certificate to the https listener by passing the secret in `spec.tls`. It will generate a TLS/SSL certificate in the VNGCLOUD portal and the load balancer will use it. When the certificate expires or changes, the user must update the secret, a new certificate will be created, the load balancer must update.

1. Create a ingress with tls

    ```yaml
    apiVersion: networking.k8s.io/v1
    kind: Ingress
    metadata:
    name: linhpn4
    annotations:
        kubernetes.io/ingress.class: "vngcloud"
    spec:
    tls:
        - hosts:
            - example.com
        secretName: secret-annd2
    rules:
        - host: example.com
        http:
            paths:
            - path: /3
                pathType: Exact
                backend:
                service:
                    name: goapp-debug
                    port:
                    number: 3333
    ```

2. Update secret

    ```yaml
    apiVersion: v1
    kind: Secret
    metadata:
      name: secret-annd2
    type: kubernetes.io/tls
    data:
      # values are base64 encoded, which obscures them but does NOT provide
      # any useful level of confidentiality
      tls.crt: |
        LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZRVENDQXlrQ0ZEa0ZhbEIwNVFoOXlEUzMz
        VUNFT3U5T3M1UHpNQTBHQ1NxR1NJYjNEUUVCQ3dVQU1GMHgKQ3pBSkJnTlZCQVlUQWtGVk1STXdF
        UVlEVlFRSURBcFRiMjFsTFZOMFlYUmxNU0V3SHdZRFZRUUtEQmhKYm5SbApjbTVsZENCWGFXUm5h
        WFJ6SUZCMGVTQk1kR1F4RmpBVUJnTlZCQU1NRFNvdVpYaGhiWEJzWlM1amIyMHdIaGNOCk1qUXdN
        akU1TURrME56TTVXaGNOTWpVd01qRTRNRGswTnpNNVdqQmRNUXN3Q1FZRFZRUUdFd0pCVlRFVE1C
        RUcKQTFVRUNBd0tVMjl0WlMxVGRHRjBaVEVoTUI4R0ExVUVDZ3dZU1c1MFpYSnVaWFFnVjJsa1oy
        bDBjeUJRZEhrZwpUSFJrTVJZd0ZBWURWUVFEREEwcUxtVjRZVzF3YkdVdVkyOXRNSUlDSWpBTkJn
        a3Foa2lHOXcwQkFRRUZBQU9DCkFnOEFNSUlDQ2dLQ0FnRUF5NEttMldtR2xQNEpiaFQ2czRwSWIz
        WHFEL2JQeUZSaFlSV1FUd3F4eEdYM3BsUHIKbVU2ck11Rnp6bEE2QlRrQmx3R0FoUkZidFhrVVBi
        TzAyRkhERW00OUVPektROTdLclh1TVJnTE1lVXA5RjIyVwpsRUJvSHhFTkZDQzJPUWpvV3FLZWZx
        VlJBQjJjd0VMdkZxY2FNZFh1eWtZQzcxZ3J5NElTY3l1aXJIS2NiTXpVCnV6OU1pTW5kQ1REeGl4
        NnlrL3BWbXlXK0RWdlc5YmNYV2tkREVoZ25sS2RlQjlCZDhDNFFEZ2dxMWRlek1ZTHgKZkNaTWZT
        RjFxRk5xMGZhVFdrYSs5QVhFVTVUSWpaR3AveXdLcHdKcFpyTmNNUXRxZmIvdVg2T05qWThoa1Uz
        TwozMUpNY05UMzVTbDRXc20wOVZxSEZNeDhMejRkWGtGa0h2WHRQWWJ2THlMR2NDR051d1RmbG1H
        bEMrSHZPRmJUCkVJWWw0MnQwNE9LZmJ4TzFZZVEvWkNYWFd4eXh1ZVdVdURQVFhWS3V4ekRlTTNG
        enpnYXRyV0tWR0RjSGtIYnMKazNLZ2lYdHlkNFl5eEVwOFAxN0JUeEhZazh1WlhzQm9nc0ZrL3pD
        OUVqbU96Z2NiVm5KTnQ5cjRrTVowRldiKwpReVQrL3MyWFZnRDJOZ0IrQVFRYkhyU3JXQWtZeGUv
        aVJRYVEzY0FJck42N2lwaFJ0OGJSU2IvMmkwYytObWpYCnBDQ3hYMW8rT3RtbTg4cm9uVER3Ty9r
        TC9Ya1ZNZFUraGVGZmpsOXFUWUIzU0szVU9UdjFzNUQ2MWQrWld6OUMKZUpnZjJGOWZaSzljRkZz
        S2lSZWNYZ1lVN0VvL1J2Ti9IcjdLUlh4aktFVEVpK2I2bGVXT0VHWS9QVEVDQXdFQQpBVEFOQmdr
        cWhraUc5dzBCQVFzRkFBT0NBZ0VBbHlPbk9nS2ZldWxYSXZad0xKSkNTTHZUZHliUVRCbHNxYkV4
        Cnk5YjcrUUIyQ0w5SklVR1VzdUhqQS9RVHVLcEhGYVBXMW83bkRHZjFZcXkwNm9tWkVEcWhXamxW
        R0dWRkFlMWYKNkJ2WHVPWXc1T2l0QjFqRVN4UUlPZmJiVDVWTVEwb2hxQ1cwUitnSm0rdkhYd2g4
        ZkVSUkR4aWg4aVI0ZUY1WAp6cXlyT3k4djdSUGZqNEtFWEx3NWQ0eXZqZzNCd1NURUcxM0JYRjdM
        Z1hRaERUOTdnOFZiYTlHc21QeEFOUlpsCmVjWW9FNC9mTlR5bHZXWUR5bW50djVBRXFWNUY0bHZJ
        VTNUMVlITkZiNG9ZOXlud0t1V1hiTGtQbjQ2bjBlbjMKQ0FVRzlQWnV0SU5kY1F0OFNQaE1qNFlG
        UFJkaVBNY1VpWXJFNnJmMkYxYjgvS3RpWTJnQjB6Y2RaZXNXMDRueApkUkdjWkR4RjJ2elJ3OHkw
        SVBKa0VTMkd3eHVDR281aE1oY2plYXV2Z2pZdzRtL2VTRXU4MEV3VGVOdW53ZXVOCmJia0NZUzlI
        WVBWQWoyKzRuN3dQSXJjS05oUVFJUkxCaDdVRzZDejdoRUtsUW9tYXN5em5DdUpIemdoQ2Z2ckIK
        dkJrU3dSSENGZ1ltWW5mK0tCQUtHemZ3WkRDZ0ZHVzd2ZHRZUnNxakFzUjBNaUxSN2ozR2dvSytE
        bXIyVk9TTApsWWhvU3JOUmpIMWZJMUxPeXNWWUlSZVdjbXNaeUFQcXpXbWVWYjMzOGVTYWxyR3E3
        Qm96aW1lcGNmTE1sY0RvCmFaVnpRbWdubnowU1lQQ3BzSDVvZTdMdStxdWVnMUl4NkcyQU9jMUw3
        MnFhUkR3U05uRXZoVnVYVTBUWlJ6WTkKMnF2WXZKMD0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0t
        LQo=
    
      tls.key: |
        LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUpRZ0lCQURBTkJna3Foa2lHOXcwQkFRRUZB
        QVNDQ1N3d2dna29BZ0VBQW9JQ0FRRExncWJaYVlhVS9nbHUKRlBxemlraHZkZW9QOXMvSVZHRmhG
        WkJQQ3JIRVpmZW1VK3VaVHFzeTRYUE9VRG9GT1FHWEFZQ0ZFVnUxZVJROQpzN1RZVWNNU2JqMFE3
        TXBEM3NxdGU0eEdBc3g1U24wWGJaYVVRR2dmRVEwVUlMWTVDT2hhb3A1K3BWRUFIWnpBClF1OFdw
        eG94MWU3S1JnTHZXQ3ZMZ2hKeks2S3NjcHhzek5TN1AweUl5ZDBKTVBHTEhyS1QrbFdiSmI0Tlc5
        YjEKdHhkYVIwTVNHQ2VVcDE0SDBGM3dMaEFPQ0NyVjE3TXhndkY4Smt4OUlYV29VMnJSOXBOYVJy
        NzBCY1JUbE1pTgprYW4vTEFxbkFtbG1zMXd4QzJwOXYrNWZvNDJOanlHUlRjN2ZVa3h3MVBmbEtY
        aGF5YlQxV29jVXpId3ZQaDFlClFXUWU5ZTA5aHU4dklzWndJWTI3Qk4rV1lhVUw0ZTg0VnRNUWhp
        WGphM1RnNHA5dkU3Vmg1RDlrSmRkYkhMRzUKNVpTNE05TmRVcTdITU40emNYUE9CcTJ0WXBVWU53
        ZVFkdXlUY3FDSmUzSjNoakxFU253L1hzRlBFZGlUeTVsZQp3R2lDd1dUL01MMFNPWTdPQnh0V2Nr
        MjMydmlReG5RVlp2NURKUDcrelpkV0FQWTJBSDRCQkJzZXRLdFlDUmpGCjcrSkZCcERkd0FpczNy
        dUttRkczeHRGSnYvYUxSejQyYU5la0lMRmZXajQ2MmFienl1aWRNUEE3K1F2OWVSVXgKMVQ2RjRW
        K09YMnBOZ0hkSXJkUTVPL1d6a1ByVjM1bGJQMEo0bUIvWVgxOWtyMXdVV3dxSkY1eGVCaFRzU2o5
        Rwo4MzhldnNwRmZHTW9STVNMNXZxVjVZNFFaajg5TVFJREFRQUJBb0lDQUVXNG5wbm9qYnQ0cHRs
        b1paVmlBRHZ6CmJUdUg1cHF1MGVmVlgrbThjN2VoNld5NTNvTFkwVTB1c1NLVEdMV1dXS1dYMWFT
        QkZHYkJNdjZLbFIveEx3QWUKOVZ2Wmk5Z2h1VlVpK1NVNUt6MDRtRStRODJBYUNySHVBUW1PeFc4
        WHpxYlNoTE5GeHREZjFFYUlCK28rV0hxUApYTzQrZXgzdG1wOXZrZ3VUL1BqUWtTZXpLd1IxaEs1
        dVhnUWFtUDM5QjlncmtPMkV5aTVBY3c0ZWFtazY5Yzc2CnFJREVzREhFSUpLNjdUUXBkeWRvN1JL
        KzFpV2U1MkNOT0laeEFhMHFLVVJwN1Z5anB5V3RXT0lyYjg2a2s0ZXgKQzFRc2laNmgxeHQ2eUZ0
        S3FLSEJVaEk2VW0vdS9aSkFYQ2RPQkZZeU9ZVS9QUDBTcTA3eUhGU2cyWURENTBFcgpCeFFxMCtW
        ckZ5UWJXd1RRc1Jxanl2RFVKMmluWW8rZjgwaHRRbzl1QzlVZ2ZuQmNYbkV4eVJraEk4bGhUckwr
        ClhDMnZqcG1kLzkvR29SVENZMTY3Z1h5SEg3VVc5QTN4amNOQVp5QkJHOHV0M0EzSGlrOGpLMUlY
        VGpwcjhMTlUKL0VHbElFU1ZGLzZNR2NBMlFxRm9FWHhsOEdsSmRPY1FrNUVFcWIraEZpa2djeW1a
        NU8yVDJqdFdhTHRSdy81QQpqNEVodHZ6bVdkeXNRMkxUVmV0VG52RTZaMDRBVldqZzR4bk1qZzl2
        djIzdGFmU1VlN2NGNVBud2pvZ1hNZHdZCkZ1SElFam1FeU41eURkYjF5TG1jMWFYVmV1ak1SR3FO
        UCtQQndVQnNnT0VMb1R5Um5SSzNNQzNxOGZMZXQ1STAKWEY2SVZhTC9CcHpnZG5QOGU5V0xBb0lC
        QVFEZUVrbTZERTgxN2VlRFlLbkRHbGdmSTdNRExSQWMrNzhnUnhsUQpaeGdTVTZ2WVF2bzcreklT
        VFZoZDBNMjB3cmd2TTNBUjV2YU9QK25rYmlqdXlXOHlqM0ZlTjRWSTZmOWxLc3ZyCmtHTVN3QW1H
        cnNuZ21RZG9NQ04vQ2NrYk0zcnorM2tKSDJuK2JzSHVjVWgrRW05K2ZoaW1jZEdMVGRwVjYwdWoK
        bkNUQjdYdWVaUklpOFFMTUNUak1yd1BmaXBmdTVRMXNhWGlzbldVdGRqK0cxR3BkUFVwdittaXQr
        K3pJcnhFQQplVjdETmwwZzhYS1NjbHN5U0xiU0hwampzcEt2MUUrZjhwWmQzTTZqbXZoRnpoSEow
        Z2s3M2Y4RDRZUlFiMUQ2CjdQZE0wVWEzN01uMjlJWTcrWHJOSDNpa3R6aVVvRmhiQmJaVDgrdHpv
        R2dpckowTEFvSUJBUURxbW1YNHdTWTYKWmlYUFpFeU5VM0I1WGI0UHIxMWQ0VW9mOTRVRExESFo3
        QzlCa3V6c1JoTzZXbjhkaS9BNis5Smx4cUJPaG51awpZOWdjU1YwNWdJc2hBV3dSc3JpaFVSa3NY
        T3p6ckRlL0c5aURMdFJaUUNnSGpYUEJla0NhOGJFTTJEdzdOSVZJCmd5Q0tRL2k4NlBZaVhWRWpX
        UWt6YWt2OGpEU1lNQ0k4S3JZbjh5RFM4TDR2QXBpK002eDcyRkUvSnhURGJTQVMKZndaQnJMdXd2
        MUFHcTZTemNCNGNDMW96RDVwcFRJeTI4RU5OYWFPamVLTUtDMFJGaEp1cm5JblQzZXFCZlZSMQpQ
        QlRXUmt5aHNLS2RRSngranVSdmFFaVVtNmhaWEpiVEMyeGNhUW5lMGkyZ0FhNStCV3F0NGdqbCtj
        c0gzM1pzCmpoSE93TE5MeEZ3ekFvSUJBRTdlMStpSDdxb01zS2pzYjk2blFKenVwT2wvMjdVdmhC
        WUdxbXJ2OHBDdnZ0eTAKRFFPNGwzUUFuRjNWaHZtb0hwcEUvb3lkSnZ3bW52OU9VS05lVDJ2NW5o
        NEVRZ1kvZFVHTkRaZkFWQytZbk1tRQowcFkrUTI4eGlhblk0K0FSVEozU3RvNFM1aVpEV0FWRG5x
        ZUlES2swUjdUMXY2Sm1LQ0ZUekMxemkycUUyZDdMCnJzRlNMOWdmZmxqVDMrQkk3T1VmM01DZ1JR
        ZXBid0hTZVlWOWM3bGh4MG8xK1creGhjdFF3ZzBWRGg3dTgreDcKVkdIRzA3VHNObUl5RThMcTdV
        WWRkWm90SWxKNzFiZ3RsZmZVMUdTRmdGb080aitTbk5la2NYSnRMdmZOYS94dQowTnd3eEd3UWt4
        aS9FSzRQbEx6VXBnek4zbys2bGVrZkUxMGRTVGtDZ2dFQVhxcFF6WEM3Q1VPZ3JEQVB4OU5NCmhs
        eXlUY2Y0aCtKWnM4NkFLTWlUa1JrQjlKYmg3WEZWa3BQanlUdG5nNVdMejYrM2poZ3NHaWlEMHQ0
        enRQbE8KcXRIVkZzc2tQMHZuT1lTQnhNM1FiTmhDcEtTbjRSL0hSMHpuMGNHUUFqWFd1SlVrc01z
        L29RUHdoSHByQzJlQgpzbG92WEhFWUNsd3hMMFl3RHQwVlkydmt0dmdmWFo3eFR5emdENWZ3V01U
        disraThNeU44bHBvVkh6a2hQMi9qClRkM0RCdmtOM1VramE0azNTSmd3QzcybG1yNHUzczdXRXo1
        Nm5RYW1mamdiVVpleGdmRGR2TFN5djhmOE1oNkIKYjZ6YnVTSFZ3YksxM3VsMHBDSjlaY210UHhq
        UGQ4OGR3L3dKdWlaYlpyRFg0RnpNZFcvUmJIcGpheWRNOGh6WgpDd0tDQVFFQWszaGZlUlJ4d1ZQ
        L3hHMzNwVVU0MlExdXlpdFpzT0luRFNUTEgya2ZxQ0RWZWJEV0lITVZkTFcvClBidW1LMEpIQ09X
        dXRvdG44enR3Z1J2UzBkRVZlN1kzdTZMdEhwRERmNWtWOGFDL0RLVFNWMHpCVDFFM0J4VisKSWox
        QkdLMll4UEFMVktUWGJmczJrcHgwZXZ5ZXVNWmltREppaTZtclRmTTk3aDdTbmphNzJLaGZvNFpC
        R2k4RApYVmVDWEFTeXVlakd1UEZWUFlOdlpLMVlYbVEzZnBpbzBtdUI0ZVBzcU1mTVFNSk9rZXp5
        K08zbFpLdlpmNm9ECm1HM0JnN3BvQUthL1ZUUWJqVHplblhYcHk3NlFaVXEwZDBpRTBVMitPZ0Y2
        UWV2UlB0dDdqZ2htc2JDWittZDQKNW0vNStqc3FraVVXV1pHbkRlamVaQmZXREFlTEZRPT0KLS0t
        LS1FTkQgUFJJVkFURSBLRVktLS0tLQo=
    ```

3. Check if LB update the new cert
